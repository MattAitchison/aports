# Maintainer:  Natanael Copa <ncopa@alpinelinux.org>
pkgname=mdocml
pkgver=1.12.4
pkgrel=0
pkgdesc="mdoc/man compiler"
url="http://mdocml.bsd.lv/"
arch="all"
license="BSD"
depends=
makedepends=
install=
subpackages="$pkgname-doc $pkgname-dev $pkgname-man"
source="http://mdocml.bsd.lv/snapshots/mdocml-$pkgver.tar.gz man.sh"

_builddir="$srcdir"/$pkgname-$pkgver

prepare() {
	cd "$_builddir"
}

build() {
	cd "$_builddir"
	make PREFIX=/usr DBBIN= || return 1
}

package() {
	cd "$_builddir"
	make DESTDIR="$pkgdir" PREFIX=/usr MANDIR=/usr/share/man DBBIN= \
		EXAMPLEDIR=/usr/share/doc/mdocml/examples base-install
}

man() {
	arch="noarch"
	cd "$srcdir"
	depends="mdocml"
	install -Dm 755 man.sh "$subpkgdir"/usr/bin/man || return 1
}

md5sums="1ad266467b9c9c6fcce5e237e8f5efd6  mdocml-1.12.4.tar.gz
cc5c665dc509243963f1b3a60f655b7f  man.sh"
sha256sums="dcae3de8098026046848dcb853ea72c3eb5378a7c94a55adaf5e7b04058f780a  mdocml-1.12.4.tar.gz
03039dd8c79cf054200cfe328924078ecc103f87be94ecabf7f7e5ad9e3c48eb  man.sh"
sha512sums="22acca47e92039465f84652cba77a375eb734b3059440940cf3447cde0e0da3c169b4bf93c7f05a8994743505d853974d53c072f1fd7959879c68b20f43f2253  mdocml-1.12.4.tar.gz
2d6bcde740d613ab225c2e35e53d6057bdc367ef85c75ccb99df587f51484e87c5fd958298be9d770241014eec4a2bd7be8084f00815fd64a999cb7752bdfb3f  man.sh"
